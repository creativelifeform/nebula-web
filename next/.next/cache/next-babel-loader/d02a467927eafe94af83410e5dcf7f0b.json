{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/rohandeshpande/Projects/nebula-web/next/pages/download/Form/index.js\";\nimport { PLATFORM, PLATFORMS } from '../constants';\nimport React, { Component } from 'react';\nimport Api from '../../../common/api';\nimport { Email } from './Email';\nimport { Error } from './Error';\nimport { PlatformSelect } from './PlatformSelect';\nimport { mapValueToKey } from '../../../common/utils';\nexport var Form =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Form, _Component);\n\n  function Form() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Form)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      platform: PLATFORM,\n      email: '',\n      data: null,\n      error: null,\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnSelect\", function (platform) {\n      return _this.setState({\n        platform: platform,\n        data: null,\n        error: null\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnEmail\", function (email) {\n      return _this.setState({\n        email: email\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnSubmit\", function () {\n      var _this$state = _this.state,\n          platform = _this$state.platform,\n          email = _this$state.email;\n\n      _this.setState({\n        loading: true,\n        error: null\n      },\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return Api.sendSignupRequest({\n                  platform: platform,\n                  email: email\n                });\n\n              case 3:\n                data = _context.sent;\n\n                _this.setState({\n                  data: data,\n                  loading: false\n                });\n\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n\n                _this.setState({\n                  loading: false,\n                  error: _context.t0.json\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 7]]);\n      })));\n    });\n\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          data = _this$state2.data,\n          error = _this$state2.error,\n          loading = _this$state2.loading,\n          platform = _this$state2.platform;\n      return React.createElement(\"div\", {\n        className: \"Form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          return e.preventDefault();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(PlatformSelect, {\n        onSelect: this.handleOnSelect,\n        initialValue: PLATFORM,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }), !data && React.createElement(Email, {\n        platform: this.state.platform,\n        loading: loading,\n        onEmail: this.handleOnEmail,\n        onSubmit: this.handleOnSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      })), data && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"button\",\n        href: data.link,\n        download: data.link,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Download Nebula for \", mapValueToKey(PLATFORMS, platform))), error && React.createElement(Error, {\n        json: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"Disclaimer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"We will only send you Nebula product updates, \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), \"we will \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"never\"), \" spam you. Unsubscribe at any time!\"));\n    }\n  }]);\n\n  return Form;\n}(Component);","map":{"version":3,"sources":["/Users/rohandeshpande/Projects/nebula-web/next/pages/download/Form/index.js"],"names":["PLATFORM","PLATFORMS","React","Component","Api","Email","Error","PlatformSelect","mapValueToKey","Form","platform","email","data","error","loading","setState","state","sendSignupRequest","json","e","preventDefault","handleOnSelect","handleOnEmail","handleOnSubmit","link"],"mappings":"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","sourcesContent":["import { PLATFORM, PLATFORMS } from '../constants';\nimport React, { Component } from 'react';\n\nimport Api from '../../../common/api';\nimport { Email } from './Email';\nimport { Error } from './Error';\nimport { PlatformSelect } from './PlatformSelect';\nimport { mapValueToKey } from '../../../common/utils';\n\nexport class Form extends Component {\n  state = {\n    platform: PLATFORM,\n    email: '',\n    data: null,\n    error: null,\n    loading: false,\n  };\n\n  handleOnSelect = platform =>\n    this.setState({ platform, data: null, error: null });\n\n  handleOnEmail = email => this.setState({ email });\n\n  handleOnSubmit = () => {\n    const { platform, email } = this.state;\n\n    this.setState({ loading: true, error: null }, async () => {\n      try {\n        const data = await Api.sendSignupRequest({ platform, email });\n\n        this.setState({ data, loading: false });\n      } catch (error) {\n        this.setState({ loading: false, error: error.json });\n      }\n    });\n  };\n\n  render() {\n    const { data, error, loading, platform } = this.state;\n\n    return (\n      <div className=\"Form\">\n        <form onSubmit={e => e.preventDefault()}>\n          <PlatformSelect\n            onSelect={this.handleOnSelect}\n            initialValue={PLATFORM}\n          />\n          {!data && (\n            <Email\n              platform={this.state.platform}\n              loading={loading}\n              onEmail={this.handleOnEmail}\n              onSubmit={this.handleOnSubmit}\n            />\n          )}\n        </form>\n        {data && (\n          <div>\n            <a className=\"button\" href={data.link} download={data.link}>\n              Download Nebula for {mapValueToKey(PLATFORMS, platform)}\n            </a>\n          </div>\n        )}\n        {error && <Error json={error} />}\n        <div className=\"Disclaimer\">\n          We will only send you Nebula product updates, <br />\n          we will <b>never</b> spam you. Unsubscribe at any time!\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}